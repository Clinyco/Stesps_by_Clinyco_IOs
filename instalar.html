<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Instalar Clínyco Steps</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#e60e68">
<link rel="apple-touch-icon" sizes="180x180" href="/icon-180.png">
<style>
  :root { --brand:#e60e68; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; padding:24px; line-height:1.45; }
  .card { max-width:560px; margin:0 auto; border:1px solid #eee; border-radius:16px; padding:20px; box-shadow:0 4px 24px rgba(0,0,0,.06); }
  h1{font-size:22px;margin:0 0 12px} .muted{color:#666}
  .btn{border:0;background:var(--brand);color:#fff;padding:12px 16px;border-radius:12px;font-weight:600;cursor:pointer}
  .hide{display:none}
  .step{display:flex;gap:10px;margin:10px 0}
  .n{width:24px;height:24px;border-radius:50%;background:var(--brand);color:#fff;display:grid;place-items:center;font-size:12px;font-weight:700}
</style>
</head>
<body>
<div class="card">
  <h1>Instalar Clínyco Steps</h1>
  <p class="muted">Añade el icono a tu pantalla de inicio y úsala como app.</p>

  <div id="android" class="hide">
    <p><b>Android (Chrome/Edge)</b></p>
    <p>Pulsa “Instalar app” y confirma.</p>
    <button id="btn-install" class="btn hide">⬇️ Instalar app</button>
    <p class="muted">Si no ves el botón, usa el menú ⋮ → <i>Añadir a pantalla de inicio</i>.</p>
  </div>

  <div id="ios" class="hide">
    <p><b>iPhone/iPad (Safari)</b></p>
    <div class="step"><div class="n">1</div><div>Abre este enlace en <b>Safari</b>.</div></div>
    <div class="step"><div class="n">2</div><div>Toca <b>Compartir</b> (cuadro con flecha).</div></div>
    <div class="step"><div class="n">3</div><div>Elige <b>Añadir a pantalla de inicio</b> y confirma.</div></div>
  </div>

  <div id="miui" class="hide">
    <p><b>Xiaomi (Mi Browser)</b></p>
    <div class="step"><div class="n">1</div><div>Abre el menú ≡ o ⋮.</div></div>
    <div class="step"><div class="n">2</div><div>Toca <b>Agregar a pantalla principal</b> y confirma.</div></div>
  </div>

  <p id="installed" class="hide">✅ <b>¡Ya está instalada!</b> Abre el icono en tu pantalla de inicio.</p>
</div>

<script>
const ua = navigator.userAgent || navigator.vendor || '';
const isiOS = /iPad|iPhone|iPod/.test(ua);
const isAndroid = /Android/i.test(ua);
const isMIUI = /MiuiBrowser|XiaoMi|Redmi|Mi\s/i.test(ua);
const $ = s => document.querySelector(s);
const show = id => $(id).classList.remove('hide');

if (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches) show('#installed');
if (isiOS) show('#ios');
if (isAndroid) show('#android');
if (isMIUI) show('#miui');

let deferredPrompt=null;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt=e;
  const btn=$('#btn-install');
  btn.classList.remove('hide');
  btn.onclick=async()=>{ try{ deferredPrompt.prompt(); await deferredPrompt.userChoice; }catch(_){} btn.classList.add('hide'); deferredPrompt=null; };
});
</script>

<script>
if ('serviceWorker' in navigator) { navigator.serviceWorker.register('/sw.js').catch(()=>{}); }
</script>
</body>
</html>
